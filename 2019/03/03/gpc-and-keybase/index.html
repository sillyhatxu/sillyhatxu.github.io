<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    
    
    
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="Yn3awazR93z5OPqSIw6m51U6qko6-IIR7FOW-t1ea6o" />
    
    <meta name="baidu-site-verification" content="YrZxWuaTxi" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/blog.css">
    <link rel="stylesheet" href="/css/markdown.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-9226765094306162",
            enable_page_level_ads: true
        });
    </script>
    <style>
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
            <div class="col-4 pt-1">
                <img src="/images/home.png">
            </div>
            <div class="col-4 text-center">
                <a class="blog-header-logo text-dark" href="http://sillyhatxu.com">Sillyhat Blog</a>
            </div>
            <div class="col-4 d-flex justify-content-end align-items-center">
                <a class="text-muted" href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="mx-3" focusable="false" role="img"><title>Search</title>
                        <circle cx="10.5" cy="10.5" r="7.5"></circle>
                        <line x1="21" y1="21" x2="15.8" y2="15.8"></line>
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <div class="nav-scroller py-1 mb-2">
        <nav class="nav d-flex justify-content-between ">
            <a class="p-2 text-muted" href="http://sillyhatxu.com">Home</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/algorithm" title="algorithm">algorithm</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/daily" title="daily">daily</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/database" title="database">database</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/english" title="english">english</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/front-end" title="front-end">front-end</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/golang" title="golang">golang</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/interview" title="interview">interview</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/operation" title="operation">operation</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/python" title="python">python</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/record" title="record">record</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/tools" title="tools">tools</a>
            
        </nav>
    </div>
</div>
<main role="main" class="container">
    <div class="row">
        <div class="col-md-8 blog-main">
    <h3 class="pb-3 mb-4 font-italic border-bottom">Gpc and Keybase</h3>
    
    <span class="badge badge-warning"><a href="http://sillyhatxu.com/tags/gpc" role="button">gpc</a></span>
    
    <span class="badge badge-warning"><a href="http://sillyhatxu.com/tags/keybase" role="button">keybase</a></span>
    
    <p class="blog-post-meta">Posted by <a href="http://sillyhatxu.com" role="button">iambowen</a> Sunday, March 3, 2019</p>
    <article class="markdown-body">

<blockquote>
<p>author : <a href="https://www.jianshu.com/p/e4c1f95a0462">iambowen</a></p>
</blockquote>

<p><a href="https://keybase.io/">keybase</a><br>
<a href="https://en.wikipedia.org/wiki/GNU_Privacy_Guard">GPG(GnuPG)</a>是一种使用混合加密技术(对称/非对称，对称加密提升加密速度，公钥加密用来保证key交换时的安全性)的应用。它的主要作用在于:</p>

<p>身份验证。对自己的工作签名，比如git提交，邮件等。<br>
加密。对交流的过程进行加密保护，防止被别人窃取。<br></p>

<p>如果是用gpg工具来生成和发布key的话，流程是这样的:<br>
生成key<br></p>

<pre><code>~&gt; gpg --gen-key
gpg (GnuPG) 1.4.19; Copyright (C) 2015 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048)
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 1y
Key expires at Sat Dec 23 16:20:33 2017 CST
Is this correct? (y/N) y

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    &quot;Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;&quot;
Real name: Rich Dickson
Email address: dickson.rich@richdick.com
Comment: richdick
Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key.   ##用密码保护master key

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
..+++++
...+++++
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
..........+++++
........+++++
gpg: key C5071A6F marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   4  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 4u
gpg: next trustdb check due at 2017-08-02
pub   2048R/C5071A6F 2016-12-23 [expires: 2017-12-23]
      Key fingerprint = 1D98 85B1 7D28 942B A265  3BEA AFD0 0C00 C507 1A6F
uid                  Rich Dickson (richdick) &lt;dickson.rich@richdick.com&gt;
sub   2048R/DDAF894F 2016-12-23 [expires: 2017-12-23]
</code></pre>

<p>把这个key导出保存在一个安全的地方，比如保险柜 :)</p>

<pre><code> ~&gt; gpg --export-secret-keys --armor &quot;Rich Dickson (richdick) &lt;dickson.rich@richdick.com&gt;&quot; &gt; richdick-private-key.asc
</code></pre>

<h2 id="把public-key发布出去">把public key发布出去</h2>

<p>公共的key server可以选hkp://keys.gnupg.net或者keybase.io. Keybase用起来比较方便，下面以它来举例:</p>

<pre><code>brew install keybase

keybase login

keybase pgp select --multi
#    Algo    Key Id             Created   UserId
=    ====    ======             =======   ======
2    2048R   AFD00C00C5071A6F             Rich Dickson &lt;dickson.rich@richdick.com&gt;
Choose a key: 2
▶ INFO Bundle unlocked: AFD00C00C5071A6F
▶ INFO Generated new PGP key:
▶ INFO   user: Rich Dickson (richdick) &lt;dickson.rich@richdick.com&gt;
▶ INFO   2048-bit RSA key, ID AFD00C00C5071A6F, created 2016-12-23
▶ INFO Key AFD00C00C5071A6F imported
</code></pre>

<p>我有个朋友叫Logan，我在keybase上搜索下它:</p>

<pre><code>~&gt; keybase search logan
loganhan twitter:logan_han github:logan-han coinbase:loganhan dns://han.life
</code></pre>

<p>假设我现在需要给它传递一段加密信息，那么可以这样:</p>

<pre><code> ~&gt; echo 'Merry Xmas, Logan!' &gt; secrets.txt
 ~&gt; keybase encrypt -i secrets.txt -o secrets.txt.asc loganhan
▶ INFO Identifying recipient loganhan
✔ &lt;tracked&gt; public key fingerprint: BFC6 69B1 861B 8A71 044A 70F1 5E6A 5830 E81F 7EA2
You last followed loganhan on 2016-08-03 10:09:33 CST

</code></pre>

<p>加密后的内容如下:</p>

<pre><code>BEGIN KEYBASE SALTPACK ENCRYPTED MESSAGE. kiQrUWZvE8pSlIf jYX6ZmEkk4Gba7a 
....
3gZJb6yMWYBnlCU VCVZhPh2MvRiWne lhaaSZViJOXr407 Wt7NXT9RU6Mb96M 28XkWJMHHE60iwD ASc8SRp0HDuMCMg CXx6bMqIWf68ZfT yL19g5vgAGaQi8b yyY7tFMpJ5d5GJe eTa0ZP4AiI20Ez5 4eAZKoy9D4L3R77 ezDwAo5OscyQTUY voRvduVQoWhET3p w9eF13YSk2tajBq 7OuopZZOS1RjE9y sKnmYXLEvaiOKw0 . END KEYBASE SALTPACK ENCRYPTED MESSAGE.
</code></pre>

<p>我的同事如果收到这个加密后的文件的话，可以用下面的命令解密:</p>

<pre><code> ~&gt; keybase decrypt -i secrets.txt.asc
Message authored by iambowen
Merry Xmas, Logan!
</code></pre>

<h2 id="验证身份">验证身份</h2>

<p>我觉得如果希拉里的团队知道用邮件加密的功能，就不会被钓鱼，导致邮件泄密，最终败选。GPG可以用在多个地方去验证身份，比如Twitter、DNS、github等。以github为例，在个人的setting里面可以添加GPG的public key。
首先，导出GPG的public key，并在setting页面添加:</p>

<pre><code>gpg --export --armor iambowen.m@gmail.com | pbcopy
</code></pre>

<p>本地配置git的signing key:</p>

<pre><code>git config --global user.signingkey iambowen.m@gmail.com
</code></pre>

<p>提交的时候附加身份信息:</p>

<pre><code> ~&gt; git commit -S

You need a passphrase to unlock the secret key for
user: &quot;Bowen Ma (My GPG key) &lt;iambowen.m@gmail.com&gt;&quot;
2048-bit RSA key, ID A02C6030, created 2016-06-21

[master 0a06550] Why: Testing commit with GPG
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
 
</code></pre>

<p>在github检查这次提交</p>

<pre><code>https://github.com/iambowen/microservices-training-lesson-8-security/commit/0a06550f2738b780544af839662fd9f6dfc506b4
</code></pre>

<p>可以看到提交者的身份已经被验证过了。</p>

<p>其实我个人使用GPG(或者keybase这个工具)去加密的场景很少，不过如果以后对于安全的要求加强，这个应该是可以用到的。</p>
</article>
</div>



        <aside class="col-md-4 blog-sidebar">
    <div class="p-3">
    <h4 class="font-italic">Tags</h4>
    <ol class="list-unstyled mb-0">
        
        <li><a href="http://sillyhatxu.com/tags/algorithm">algorithm</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/android">android</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/atom">atom</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/blog">blog</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/cambly">cambly</a>(42)</li>
        
        <li><a href="http://sillyhatxu.com/tags/consul">consul</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/daily">daily</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/dart">dart</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/diary">diary</a>(8)</li>
        
        <li><a href="http://sillyhatxu.com/tags/docker">docker</a>(4)</li>
        
        <li><a href="http://sillyhatxu.com/tags/elasticsearch">elasticsearch</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/elk">elk</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/english">english</a>(9)</li>
        
        <li><a href="http://sillyhatxu.com/tags/flutter">flutter</a>(5)</li>
        
        <li><a href="http://sillyhatxu.com/tags/forwarded">forwarded</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/git">git</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/gitlab">gitlab</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/golang">golang</a>(7)</li>
        
        <li><a href="http://sillyhatxu.com/tags/gpc">gpc</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/html">html</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/hugo">hugo</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/interview">interview</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/ios">ios</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/java">java</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/keybase">keybase</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/mac">mac</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/markdown">markdown</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/movie">movie</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/mysql">mysql</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/news">news</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/nginx">nginx</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/operation">operation</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/python">python</a>(21)</li>
        
        <li><a href="http://sillyhatxu.com/tags/record">record</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/redis">redis</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/scjp">scjp</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/scrapy">scrapy</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/subtitle">subtitle</a>(186)</li>
        
        <li><a href="http://sillyhatxu.com/tags/ted">ted</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/word">word</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/xpath">xpath</a>(1)</li>
        
    </ol>
</div>
    <div class="p-3 mb-3 bg-light rounded">
    <h4 class="font-italic">About</h4>
    <p class="mb-0">I am a software engineer with 8+ years of experience. I have well as architecture design and project management. Team player and enthusiastic communicator, and therefore effective at leading the whole server team in my current company.</p>
</div>

    <div class="p-3">
        <h4 class="font-italic">Elsewhere</h4>
        <ol class="list-unstyled">
            <li><a href="https://github.com/sillyhatxu">GitHub</a></li>
            <li><a href="https://www.linkedin.com/in/shikuan-xu-38887214b/">LinkedIn</a></li>
            
        </ol>
    </div>
    <div class="p-3">
    <h4 class="font-italic">Archives</h4>
    <ol class="list-unstyled mb-0">
        
        
            <span class="badge badge-secondary">2019<span class="badge badge-success">(282)</span></span><br>
        
        
            <span class="badge badge-secondary">2018<span class="badge badge-success">(15)</span></span><br>
        
        
            <span class="badge badge-secondary">2017<span class="badge badge-success">(11)</span></span><br>
        
        
            <span class="badge badge-secondary">2016<span class="badge badge-success">(1)</span></span><br>
        
    </ol>
</div>
</aside>
    </div>
</main>
<footer class="blog-footer">
    <p>Blog template built for <a href="https://getbootstrap.com/">Bootstrap</a> by <a href="https://twitter.com/mdo">@mdo</a>.
    </p>
</footer>
</body>
</html>