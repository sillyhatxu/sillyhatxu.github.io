<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    
    
    
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="Yn3awazR93z5OPqSIw6m51U6qko6-IIR7FOW-t1ea6o" />
    
    <meta name="baidu-site-verification" content="YrZxWuaTxi" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/blog.css">
    <link rel="stylesheet" href="/css/markdown.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-9226765094306162",
            enable_page_level_ads: true
        });
    </script>
    <style>
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
            <div class="col-4 pt-1">
                <img src="/images/home.png">
            </div>
            <div class="col-4 text-center">
                <a class="blog-header-logo text-dark" href="http://sillyhatxu.com">Sillyhat Blog</a>
            </div>
            <div class="col-4 d-flex justify-content-end align-items-center">
                <a class="text-muted" href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="mx-3" focusable="false" role="img"><title>Search</title>
                        <circle cx="10.5" cy="10.5" r="7.5"></circle>
                        <line x1="21" y1="21" x2="15.8" y2="15.8"></line>
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <div class="nav-scroller py-1 mb-2">
        <nav class="nav d-flex justify-content-between ">
            <a class="p-2 text-muted" href="http://sillyhatxu.com">Home</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/algorithm" title="algorithm">algorithm</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/daily" title="daily">daily</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/database" title="database">database</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/english" title="english">english</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/front-end" title="front-end">front-end</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/golang" title="golang">golang</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/interview" title="interview">interview</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/operation" title="operation">operation</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/python" title="python">python</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/record" title="record">record</a>
            
            
            <a class="p-2 text-muted" href="http://sillyhatxu.com/categories/tools" title="tools">tools</a>
            
        </nav>
    </div>
</div>
<main role="main" class="container">
    <div class="row">
        <div class="col-md-8 blog-main">
    <h3 class="pb-3 mb-4 font-italic border-bottom">Learning Xpath</h3>
    
    <span class="badge badge-warning"><a href="http://sillyhatxu.com/tags/xpath" role="button">xpath</a></span>
    
    <span class="badge badge-warning"><a href="http://sillyhatxu.com/tags/python" role="button">python</a></span>
    
    <p class="blog-post-meta">Posted by <a href="http://sillyhatxu.com" role="button">Cookie Xu</a> Sunday, March 3, 2019</p>
    <article class="markdown-body">

<h1 id="xpath-tutorial">XPath Tutorial</h1>

<h2 id="selecting-nodes">Selecting Nodes</h2>

<p>XPath uses path expressions to select nodes in an XML document. The node is selected by following a path or steps. The most useful path expressions are listed below:</p>

<table>
<thead>
<tr>
<th align="left">Expression</th>
<th align="left">Description</th>
<th align="left">中文</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">nodename</td>
<td align="left">Selects all nodes with the name &ldquo;nodename&rdquo;</td>
<td align="left">选择所有名字为&rdquo;nodename&rdquo;的节点</td>
</tr>

<tr>
<td align="left">/</td>
<td align="left">Selects from the root node</td>
<td align="left">从根节点搜索</td>
</tr>

<tr>
<td align="left">//</td>
<td align="left">Selects nodes in the document from the current node that match the selection no matter where they are</td>
<td align="left">从全文所搜</td>
</tr>

<tr>
<td align="left">.</td>
<td align="left">Selects the current node</td>
<td align="left">选择当前节点</td>
</tr>

<tr>
<td align="left">..</td>
<td align="left">Selects the parent of the current node</td>
<td align="left">选择当前节点的父节点</td>
</tr>

<tr>
<td align="left">@</td>
<td align="left">Selects attributes</td>
<td align="left">选择属性</td>
</tr>

<tr>
<td align="left">*</td>
<td align="left">xxxxxxxxxxxxxxxxxx</td>
<td align="left">匹配任何元素节点</td>
</tr>

<tr>
<td align="left">*@</td>
<td align="left">xxxxxxxxxxxxxxxxxx</td>
<td align="left">匹配任何属性节点</td>
</tr>
</tbody>
</table>

<h4 id="computes-two-node-sets-book-title-book-price-选取book所有title和price元素">|  :   [Computes two node-sets]   //book/title | //book/price 选取book所有title和price元素</h4>

<h2 id="eg">eg:</h2>

<pre><code>from scrapy.selector import Selector

body = &quot;&quot;&quot;
&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;Scrapy Tutorial By Cookie&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div class='links-div' name='div-name1'&gt;This is div&lt;/div&gt;
      &lt;p&gt;This is PPPPPPPP&lt;/p&gt;
      &lt;div class='links' name='div-name2'&gt;
         &lt;a href='one.html'&gt;Link 1&lt;img src='image1.jpg'/&gt;&lt;/a&gt;
         &lt;a href='two.html'&gt;Link 2&lt;img src='image2.jpg'/&gt;&lt;/a&gt;
         &lt;a href='three.html'&gt;Link 3&lt;img src='image3.jpg'/&gt;&lt;/a&gt;
         &lt;div class='div-1'&gt;This is div1 div1 div1&lt;/div&gt;
      &lt;/div&gt;
      &lt;ul class='test-ul'&gt;
         &lt;li&gt;&lt;a href='four.html'&gt;Link 4&lt;/a&gt;&lt;/li&gt;
         &lt;li&gt;&lt;a href='five.html'&gt;Link 5&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
      &lt;div class='links' name='div-name3'&gt;
         &lt;a href='six.html'&gt;Link 6&lt;/a&gt;
         &lt;a href='seven.html' name='a-h-name'&gt;Link 7&lt;/a&gt;
         &lt;a href='eight.html'&gt;Link 8&lt;/a&gt;
         &lt;li&gt;&lt;a href='nine.html'&gt;Link 9&lt;/a&gt;&lt;/li&gt;
      &lt;/div&gt;
   &lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;

# nodename	Selects all nodes with the name &quot;nodename&quot;
# /	        Selects from the root node
# //	    Selects nodes in the document from the current node that match the selection no matter where they are
# .	        Selects the current node
# ..	    Selects the parent of the current node
# @	        Selects attributes
# *	        匹配任何元素节点
# *@	    匹配任何属性节点
# |	        //book/title | //book/price 选取book所有title和price元素
selector = Selector(text=body)

# 1. 从根节点搜索html
# 2. 以html为根节点,搜索body
# 3. 以body为根节点搜索div
tag_value = selector.xpath(&quot;/html/body/div&quot;).extract()  # 返回数组长度为 2  有两个div
print('selector.xpath(&quot;/html/body/div&quot;).extract() : ')
print(tag_value)  # print -&gt; ['&lt;div class=&quot;links-div&quot; name=&quot;haha&quot;&gt;...', '&lt;div class=&quot;links&quot; name=&quot;haha&quot;&gt;\n...&lt;/div&gt;']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

tag_value = selector.xpath(&quot;/html/body/div/text()&quot;).extract()[0]  # 数组中第一个div的内容  This is div
print('selector.xpath(&quot;/html/body/div/text()&quot;).extract()[0]')
print(tag_value)  # print -&gt; This is div
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 从根节点搜索 &lt;a&gt; 标签,因为根节点只有&lt;html&gt;这个标签，所以搜索结果为空
tag_value = selector.xpath(&quot;/a&quot;).extract()  # 返回 []
print('selector.xpath(&quot;/a&quot;).extract()')
print(tag_value)  # print -&gt; []
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 获取 &lt;div&gt; 下的 &lt;a&gt; 和 &lt;li&gt; 下的 &lt;a&gt;
tag_value = selector.xpath(&quot;//div/a | //li/a&quot;).extract()
print('selector.xpath(&quot;//div/a | //li/a&quot;).extract()')
for index, tag in enumerate(tag_value):
    print(index, tag)
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 从全文搜索 &lt;a&gt; 标签，查询到3个结果
tag_value = selector.xpath(&quot;//a&quot;).extract()  # 返回 [&lt;a&gt;,&lt;a&gt;,&lt;a&gt;] 3个结果
print('selector.xpath(&quot;//a&quot;).extract()')
print(tag_value)  # print -&gt; ['&lt;a href=&quot;one.html&quot;&gt;', '&lt;a href=&quot;two.html&quot;&gt;', '&lt;a href=&quot;three.html&quot;&gt;']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 获取全文 &lt;a&gt; 中 href 的 属性值
print('for loop : selector.xpath(&quot;//a/@href&quot;).extract()')
for index, tag in enumerate(selector.xpath(&quot;//a/@href&quot;).extract()):
    print(index, tag)
# 0 one.html
# 1 two.html
# 2 three.html
# 3 four.html
# 4 five.html
# 5 six.html
# 6 seven.html
# 7 eight.html
# 8 nine.html
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 从整个页面中搜索 &lt;title&gt; 标签，并取其中内容
tag_value = selector.xpath(&quot;//title/text()&quot;).extract()
print(tag_value)  # print -&gt; ['Scrapy Tutorial By Cookie']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 从整个页面中搜索 &lt;title&gt; 标签，并取其中内容，并只取第一个元素
tag_value = selector.xpath(&quot;//title/text()&quot;).extract_first()
print(tag_value)  # print -&gt; Scrapy Tutorial By Cookie
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 从所有 &lt;div&gt; 中寻找 &lt;a href=&quot;six.html&quot;&gt; 并取出内容
tag_value = selector.xpath('//div/a[@href=&quot;six.html&quot;]/text()')
print(tag_value)    # print -&gt; [&lt;Selector xpath='//div/a[@href=&quot;six.html&quot;]/text()' data='Link 6'&gt;]
print(tag_value[0].extract())   # print -&gt; Link 6
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)


# 取出最后一个 &lt;div&gt; 这一层子节点中所有 &lt;a&gt; 的href值
tag_value = selector.xpath('//div[last()]/a/@href').extract()
print(tag_value)    # print -&gt; ['six.html', 'seven.html', 'eight.html']

# 取出最后一个 &lt;div&gt; 下所有 &lt;a&gt; 的href值
tag_value = selector.xpath('//div[last()]//a/@href').extract()
print(tag_value)    # print -&gt; ['six.html', 'seven.html', 'eight.html', 'nine.html']

# 取出最后一个 &lt;div&gt; 下所有 &lt;a&gt; 的内容
tag_value = selector.xpath('//div[last()]//a/text()').extract()
print(tag_value)    # print -&gt; ['Link 6', 'Link 7', 'Link 8', 'Link 9']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 取出最后一个 &lt;div&gt; 下所有最后一个 &lt;a&gt; 的内容和所有子标签中最后一个 &lt;a&gt; 的内容
tag_value = selector.xpath('//div[last()]//a[last()]/text()').extract()
print(tag_value)    # print -&gt; ['Link 8', 'Link 9']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 取出最后一个 &lt;div&gt; 下最后一个 &lt;a&gt; 的内容
tag_value = selector.xpath('//div[last()]/a[last()]/text()').extract()
print(tag_value)    # print -&gt; ['Link 8']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 取出最后一个 &lt;div&gt; 下最后一个 &lt;a&gt; 的父节点
tag_value = selector.xpath('//div[last()]/a[last()]/..').extract()
print(tag_value)    # print -&gt; ['&lt;div class=&quot;links&quot; name=&quot;div-name3&quot;&gt;\n   ...  &lt;/div&gt;']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)
</code></pre>

<table>
<thead>
<tr>
<th align="left">Expression</th>
<th align="left">Description</th>
<th align="left">中文</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">child</td>
<td align="left">xxxxxxxxxxxxxx</td>
<td align="left">子节点</td>
</tr>

<tr>
<td align="left">node()</td>
<td align="left">xxxxxxxxxxxxxx</td>
<td align="left">节点</td>
</tr>

<tr>
<td align="left">name()</td>
<td align="left">xxxxxxxxxxxxxx</td>
<td align="left">得到tag本身的name  eg: div ul  a</td>
</tr>
</tbody>
</table>

<pre><code>from scrapy.selector import Selector

body = &quot;&quot;&quot;
&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;Scrapy Tutorial By Cookie&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div class='links-div' name='div-name1'&gt;This is div&lt;/div&gt;
      &lt;p&gt;This is PPPPPPPP&lt;/p&gt;
      &lt;div class='links' name='div-name2'&gt;
         &lt;a href='one.html'&gt;Link 1&lt;img src='image1.jpg'/&gt;&lt;/a&gt;
         &lt;a href='two.html'&gt;Link 2&lt;img src='image2.jpg'/&gt;&lt;/a&gt;
         &lt;a href='three.html'&gt;Link 3&lt;img src='image3.jpg'/&gt;&lt;/a&gt;
         &lt;div class='div-1'&gt;This is div1 div1 div1&lt;/div&gt;
      &lt;/div&gt;
      &lt;ul class=&quot;postList&quot;&gt;
        &lt;li name=&quot;aaa-aaa&quot; id=&quot;aaa&quot;&gt;writers cannot be starved&lt;/li&gt;
        &lt;li name=&quot;bbb-bbb&quot; id=&quot;bbb&quot;&gt;readers cannot be starved&lt;/li&gt;
        &lt;li name=&quot;ccc-ccc&quot; id=&quot;ccc&quot;&gt;no thread shall be allowed to starve&lt;/li&gt;
        &lt;li&gt;&lt;a href='xxx1.html'&gt;xxx-content-1&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href='xxx2.html'&gt;xxx-content-2&lt;/a&gt;&lt;/li&gt;
        &lt;div class='links' name='div-name3'&gt;
            &lt;a href='six.html'&gt;Link 6&lt;/a&gt;
            &lt;a href='seven.html' name='a-h-name'&gt;Link 7&lt;/a&gt;
            &lt;a href='eight.html'&gt;Link 8&lt;/a&gt;
            &lt;li&gt;&lt;a href='nine.html'&gt;Link 9&lt;/a&gt;&lt;/li&gt;
        &lt;/div&gt;
        &lt;li&gt;&lt;a href='xxx3.html'&gt;xxx-content-3&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href='xxx4.html'&gt;xxx-content-4&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href='xxx5.html'&gt;xxx-content-5&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href='xxx6.html'&gt;xxx-content-6&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href='xxx7.html'&gt;xxx-content-7&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
   &lt;/body&gt;
&lt;/html&gt;
&quot;&quot;&quot;

# nodename	Selects all nodes with the name &quot;nodename&quot;
# /	        Selects from the root node
# //	    Selects nodes in the document from the current node that match the selection no matter where they are
# .	        Selects the current node
# ..	    Selects the parent of the current node
# @	        Selects attributes
# *	        匹配任何元素节点
# *@	    匹配任何属性节点
# |	        //book/title | //book/price 选取book所有title和price元素
selector = Selector(text=body)


# 找出 &lt;ul&gt; 下所有的 &lt;li&gt; 的兄弟节点
tag_value = selector.xpath(&quot;//ul/child::li&quot;).extract()
print('selector.xpath(&quot;/html/body/div&quot;).extract() : ')
for index, tag in enumerate(tag_value):
    print(index, tag)
# 0 &lt;li name=&quot;aaa-aaa&quot; id=&quot;aaa&quot;&gt;writers cannot be starved&lt;/li&gt;
# 1 &lt;li name=&quot;bbb-bbb&quot; id=&quot;bbb&quot;&gt;readers cannot be starved&lt;/li&gt;
# 2 &lt;li name=&quot;ccc-ccc&quot; id=&quot;ccc&quot;&gt;no thread shall be allowed to starve&lt;/li&gt;
# 3 &lt;li&gt;&lt;a href=&quot;xxx1.html&quot;&gt;xxx-content-1&lt;/a&gt;&lt;/li&gt;
# 4 &lt;li&gt;&lt;a href=&quot;xxx2.html&quot;&gt;xxx-content-2&lt;/a&gt;&lt;/li&gt;
# 5 &lt;li&gt;&lt;a href=&quot;xxx3.html&quot;&gt;xxx-content-3&lt;/a&gt;&lt;/li&gt;
# 6 &lt;li&gt;&lt;a href=&quot;xxx4.html&quot;&gt;xxx-content-4&lt;/a&gt;&lt;/li&gt;
# 7 &lt;li&gt;&lt;a href=&quot;xxx5.html&quot;&gt;xxx-content-5&lt;/a&gt;&lt;/li&gt;
# 8 &lt;li&gt;&lt;a href=&quot;xxx6.html&quot;&gt;xxx-content-6&lt;/a&gt;&lt;/li&gt;
# 9 &lt;li&gt;&lt;a href=&quot;xxx7.html&quot;&gt;xxx-content-7&lt;/a&gt;&lt;/li&gt;#
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)


# 找出 &lt;ul&gt; 下所有的 子节点
tag_value = selector.xpath(&quot;//ul/child::*&quot;).extract()
for index, tag in enumerate(tag_value):
    print(index, tag)
# 0 &lt;li name=&quot;aaa-aaa&quot; id=&quot;aaa&quot;&gt;writers cannot be starved&lt;/li&gt;
# 1 &lt;li name=&quot;bbb-bbb&quot; id=&quot;bbb&quot;&gt;readers cannot be starved&lt;/li&gt;
# 2 &lt;li name=&quot;ccc-ccc&quot; id=&quot;ccc&quot;&gt;no thread shall be allowed to starve&lt;/li&gt;
# 3 &lt;li&gt;&lt;a href=&quot;xxx1.html&quot;&gt;xxx-content-1&lt;/a&gt;&lt;/li&gt;
# 4 &lt;li&gt;&lt;a href=&quot;xxx2.html&quot;&gt;xxx-content-2&lt;/a&gt;&lt;/li&gt;
# 5 &lt;div class=&quot;links&quot; name=&quot;div-name3&quot;&gt;
#       &lt;a href=&quot;six.html&quot;&gt;Link 6&lt;/a&gt;
#       &lt;a href=&quot;seven.html&quot; name=&quot;a-h-name&quot;&gt;Link 7&lt;/a&gt;
#       &lt;a href=&quot;eight.html&quot;&gt;Link 8&lt;/a&gt;
#       &lt;li&gt;&lt;a href=&quot;nine.html&quot;&gt;Link 9&lt;/a&gt;&lt;/li&gt;
#   &lt;/div&gt;
# 6 &lt;li&gt;&lt;a href=&quot;xxx3.html&quot;&gt;xxx-content-3&lt;/a&gt;&lt;/li&gt;
# 7 &lt;li&gt;&lt;a href=&quot;xxx4.html&quot;&gt;xxx-content-4&lt;/a&gt;&lt;/li&gt;
# 8 &lt;li&gt;&lt;a href=&quot;xxx5.html&quot;&gt;xxx-content-5&lt;/a&gt;&lt;/li&gt;
# 9 &lt;li&gt;&lt;a href=&quot;xxx6.html&quot;&gt;xxx-content-6&lt;/a&gt;&lt;/li&gt;
# 10 &lt;li&gt;&lt;a href=&quot;xxx7.html&quot;&gt;xxx-content-7&lt;/a&gt;&lt;/li&gt;
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 找出 &lt;div name='div-name2'&gt; 下所有的 子元素,包括 换行符
tag_value = selector.xpath(&quot;//div[@name='div-name2']/node()&quot;).extract()
for index, tag in enumerate(tag_value):
    print(index, tag)
# 0   这里其实有换行符
# 1 &lt;a href=&quot;one.html&quot;&gt;Link 1&lt;img src=&quot;image1.jpg&quot;&gt;&lt;/a&gt;
# 2   这里其实有换行符
# 3 &lt;a href=&quot;two.html&quot;&gt;Link 2&lt;img src=&quot;image2.jpg&quot;&gt;&lt;/a&gt;
# 4   这里其实有换行符
# 5 &lt;a href=&quot;three.html&quot;&gt;Link 3&lt;img src=&quot;image3.jpg&quot;&gt;&lt;/a&gt;
# 6   这里其实有换行符
# 7 &lt;div class=&quot;div-1&quot;&gt;This is div1 div1 div1&lt;/div&gt;
# 8   这里其实有换行符
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 取出 &lt;div name='div-name2'&gt; 子元素所有内容,其中 string(.) 这个一定要单独拿出来写,否则报错
tag_value = selector.xpath(&quot;//div[@name='div-name2']&quot;)
print(tag_value.xpath(&quot;string(.)&quot;).extract())
# print -&gt; ['\n         Link 1\n         Link 2\n         Link 3\n         This is div1 div1 div1\n      ']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)


# 取出 &lt;div name='div-name2'&gt; 这个元素的name -&gt; div
tag_value = selector.xpath(&quot;//div[@name='div-name2']&quot;)
print(tag_value.xpath(&quot;name()&quot;).extract())  # print ['div']
print(&quot;--------------------------------------------------------------------------------------------------------------&quot;)

# 找出id=content_container的div
body = response.xpath('//div[@id=&quot;content_container&quot;]').extract()
</code></pre>
</article>
</div>



        <aside class="col-md-4 blog-sidebar">
    <div class="p-3">
    <h4 class="font-italic">Tags</h4>
    <ol class="list-unstyled mb-0">
        
        <li><a href="http://sillyhatxu.com/tags/algorithm">algorithm</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/android">android</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/atom">atom</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/blog">blog</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/cambly">cambly</a>(42)</li>
        
        <li><a href="http://sillyhatxu.com/tags/consul">consul</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/daily">daily</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/dart">dart</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/diary">diary</a>(8)</li>
        
        <li><a href="http://sillyhatxu.com/tags/docker">docker</a>(4)</li>
        
        <li><a href="http://sillyhatxu.com/tags/elasticsearch">elasticsearch</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/elk">elk</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/english">english</a>(9)</li>
        
        <li><a href="http://sillyhatxu.com/tags/flutter">flutter</a>(5)</li>
        
        <li><a href="http://sillyhatxu.com/tags/forwarded">forwarded</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/git">git</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/gitlab">gitlab</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/golang">golang</a>(7)</li>
        
        <li><a href="http://sillyhatxu.com/tags/gpc">gpc</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/html">html</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/hugo">hugo</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/interview">interview</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/ios">ios</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/java">java</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/keybase">keybase</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/mac">mac</a>(3)</li>
        
        <li><a href="http://sillyhatxu.com/tags/markdown">markdown</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/movie">movie</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/mysql">mysql</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/news">news</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/nginx">nginx</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/operation">operation</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/python">python</a>(21)</li>
        
        <li><a href="http://sillyhatxu.com/tags/record">record</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/redis">redis</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/scjp">scjp</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/scrapy">scrapy</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/subtitle">subtitle</a>(186)</li>
        
        <li><a href="http://sillyhatxu.com/tags/ted">ted</a>(1)</li>
        
        <li><a href="http://sillyhatxu.com/tags/word">word</a>(2)</li>
        
        <li><a href="http://sillyhatxu.com/tags/xpath">xpath</a>(1)</li>
        
    </ol>
</div>
    <div class="p-3 mb-3 bg-light rounded">
    <h4 class="font-italic">About</h4>
    <p class="mb-0">I am a software engineer with 8+ years of experience. I have well as architecture design and project management. Team player and enthusiastic communicator, and therefore effective at leading the whole server team in my current company.</p>
</div>

    <div class="p-3">
        <h4 class="font-italic">Elsewhere</h4>
        <ol class="list-unstyled">
            <li><a href="https://github.com/sillyhatxu">GitHub</a></li>
            <li><a href="https://www.linkedin.com/in/shikuan-xu-38887214b/">LinkedIn</a></li>
            
        </ol>
    </div>
    <div class="p-3">
    <h4 class="font-italic">Archives</h4>
    <ol class="list-unstyled mb-0">
        
        
            <span class="badge badge-secondary">2019<span class="badge badge-success">(282)</span></span><br>
        
        
            <span class="badge badge-secondary">2018<span class="badge badge-success">(15)</span></span><br>
        
        
            <span class="badge badge-secondary">2017<span class="badge badge-success">(11)</span></span><br>
        
        
            <span class="badge badge-secondary">2016<span class="badge badge-success">(1)</span></span><br>
        
    </ol>
</div>
</aside>
    </div>
</main>
<footer class="blog-footer">
    <p>Blog template built for <a href="https://getbootstrap.com/">Bootstrap</a> by <a href="https://twitter.com/mdo">@mdo</a>.
    </p>
</footer>
</body>
</html>